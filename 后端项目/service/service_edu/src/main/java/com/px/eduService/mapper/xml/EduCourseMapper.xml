<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.px.eduService.mapper.EduCourseMapper">

<!--    根据课程id查询课程确认信息 id为方法名，resultType为返回对象的全类名-->
    <select id="getPublishCourseInfo" resultType="com.px.eduService.entity.vo.CoursePublishVo">
SELECT
	ec.id,
	ec.title,
	ec.price,
	ec.lesson_num lessonNum,
	ec.cover,
	et.`name` teacherName,
	es1.title oneSubject,
	es2.title twoSubject
FROM
	edu_course ec
	LEFT JOIN edu_course_description ecd ON ec.id = ecd.id
	LEFT JOIN edu_teacher et ON ec.teacher_id = et.id
	LEFT JOIN edu_subject es1 ON es1.id = ec.subject_parent_id
	LEFT JOIN edu_subject es2 ON es2.id = ec.subject_id
WHERE
	ec.id = #{id}
    </select>


	<select id="getBaseCourseInfo" resultType="com.px.eduService.entity.frontVo.CourseWebVo">
SELECT
	ec.id,
	ec.title,
	ec.price,
	ec.lesson_num lessonNum,
	ec.cover,
	ec.buy_count,
	ec.view_count,
	ecd.description,
	et.id teacherId,
	et.intro,
	et.avatar,
	et.`name` teacherName,
	es1.id subjectLevelOneId,
	es1.title subjectLevelOne,
	es2.id subjectLevelTwoId,
	es2.title subjectLevelTwo
FROM
	edu_course ec
	LEFT JOIN edu_course_description ecd ON ec.id = ecd.id
	LEFT JOIN edu_teacher et ON ec.teacher_id = et.id
	LEFT JOIN edu_subject es1 ON es1.id = ec.subject_parent_id
	LEFT JOIN edu_subject es2 ON es2.id = ec.subject_id
WHERE
	ec.id = #{courseId}
    </select>
</mapper>
